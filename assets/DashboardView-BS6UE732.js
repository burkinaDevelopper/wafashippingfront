import{i as b,r as I,j as D,o as r,c as d,a as t,k as y,l as N,t as x,n as U,g as M,u as A,f as h,m as H,F as E,p as B,b as S,e as w,v,w as q,h as L,q as O,s as z,x as j,d as R,y as Q,z as G}from"./index-CIabCGaw.js";import{_ as J}from"./loading-D9vOa6jP.js";import{u as $}from"./shipStore-DM7hMRfA.js";import{S as T,_ as K,a as P}from"./NavBar-CJKe_RVV.js";import{F as W}from"./Footer-CyuJq_hh.js";const X={class:"d-flex align-items-end justify-content-space-evenly"},Y={class:"col-lg-4 col-md-6"},Z={class:"mt-3"},tt=["data-name","data-status","data-eta","data-etb","data-etc","data-id"],et=t("i",{class:"bx bx-edit-alt me-1"},null,-1),st=[et],at=t("i",{class:"bx bx-trash me-1"},null,-1),ot=[at],lt={__name:"CardShip",props:["ship"],setup(p){const l=$(),o=p,f=b(!1),c=b(!1),n=I({name:"",status:"",eta:"",etb:"",etc:"",id:""}),u=async i=>{const s=i.currentTarget.dataset.name,a=i.currentTarget.dataset.status,_=i.currentTarget.dataset.eta,k=i.currentTarget.dataset.etb,F=i.currentTarget.dataset.etc,V=i.currentTarget.dataset.id;await T.fire({title:"Mofifier navire",html:`
    <label for="" class="form-label">Nom du navire</label>
    <input type="text" id="swal-input1" class="form-control mb-2" value="${s}">
    <label for="" class="form-label">Status</label>
    <select value="${a}" class="form-control mb-2" id="swal-input2">
        <option value="pending">pending</option>
        <option value="finish">finish</option>
    </select>
    <label for="" class="form-label">ETA</label>
    <input type="date" min="${_}" id="swal-input3" class="form-control mb-2" value="${_}">
    <label for="" class="form-label">ETB</label>
    <input type="date" min="${_}" id="swal-input4" class="form-control mb-2" value="${k}">
    <label for="" class="form-label">ETC</label>
    <input type="date" min="${_}" id="swal-input5" class="form-control mb-2" value="${F}">
    <input type="hidden" id="swal-input6" class="swal2-input" value="${V}">
  `,showCancelButton:!0,cancelButtonText:"Annuler",confirmButtonText:"modifier",allowOutsideClick:!1,focusConfirm:!1,preConfirm:()=>[n.name=document.getElementById("swal-input1").value,n.status=document.getElementById("swal-input2").value,n.eta=document.getElementById("swal-input3").value,n.etb=document.getElementById("swal-input4").value,n.etc=document.getElementById("swal-input5").value,n.id=document.getElementById("swal-input6").value]}),n.name&&e()},e=async()=>{await l.updateShip(n.id,n),l.getErrors.length||(f.value=!0,l.getShips()),l.getErrors.length&&(c.value=!0),setTimeout(()=>{f.value=!1,c.value=!1},2e3)},m=b(o.ship.id),C=async()=>{T.fire({icon:"error",title:n.name,text:"Voulez-vous supprimer cet navire ?",showCancelButton:!0,cancelButtonText:"Retour",confirmButtonText:"Oui",allowOutsideClick:!1}).then(async i=>{i.isConfirmed&&(await l.destroy(m.value),l.getShips())})};return(i,s)=>{const a=D("router-link");return r(),d("tr",{class:U({"bg-success":o.ship.status=="finish"})},[t("td",null,[t("strong",null,[y(a,{to:{name:"ship.show",params:{id:o.ship.id}}},{default:N(()=>[M(x(o.ship.name),1)]),_:1},8,["to"])])]),t("td",null,x(o.ship.eta),1),t("td",null,x(o.ship.etb),1),t("td",null,x(o.ship.etc),1),t("td",null,[t("div",X,[t("span",null,[t("div",Y,[t("div",Z,[t("button",{type:"button",class:"btn btn-primary btn-xs","data-bs-toggle":"modal","data-bs-target":"#modalTop","data-name":o.ship.name,"data-status":o.ship.status,"data-eta":o.ship.eta,"data-etb":o.ship.etb,"data-etc":o.ship.etc,"data-id":o.ship.id,onClick:s[0]||(s[0]=_=>u(_))},st,8,tt)])])]),t("span",null,[t("button",{onClick:s[1]||(s[1]=_=>C()),type:"button",class:"btn btn-xs btn-danger"},ot)])])])],2)}}},nt={class:"row"},it={class:"col-md-6"},rt={class:"card mb-4"},ct=t("h5",{class:"card-header"},"Client(*)",-1),dt={class:"card-body"},ut={class:"mb-3"},mt=t("label",{for:"exampleFormControlSelectclient",class:"form-label"},"choisir le client",-1),pt=["value"],_t={key:0,class:"bs-toast toast fade show bg-success",role:"alert","aria-live":"assertive","aria-atomic":"true"},ht=t("div",{class:"toast-header"},[t("i",{class:"bx bx-bell me-2"}),t("div",{class:"me-auto fw-semibold"},"navire ajouter"),t("small",null,"il ya 2s"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})],-1),bt=[ht],ft={key:1,class:"bs-toast toast fade show bg-danger",role:"alert","aria-live":"assertive","aria-atomic":"true"},vt=t("div",{class:"toast-header"},[t("i",{class:"bx bx-bell me-2"}),t("div",{class:"me-auto fw-semibold"},"Remplire tout les champs"),t("small",null,"il ya 1s"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"toast","aria-label":"Close"})],-1),gt=[vt],yt=L('<div class="col-md-6"><div class="card mb-4"><h5 class="card-header">tout les champs(*) sont obligatoires</h5><p class="card-header text-danger"> Si l&#39;un des champs marqués de (*) n&#39;est pas renseigné, vous ne pourrez pas envoyer . </p><div class="card-body"><div class="form-floating"></div></div></div></div>',1),xt={class:"col-md-6"},wt={class:"card mb-4"},$t=t("h5",{class:"card-header"},"Navire",-1),Ct={class:"card-body"},St={class:"mb-3"},Tt=t("label",{for:"exampleFormControlInput1",class:"form-label"},"Nom du navire(*)",-1),It={class:"mb-3"},Et=t("label",{for:"exampleFormControlInput1eta",class:"form-label"},"ETA",-1),Bt={class:"mb-3"},kt=t("label",{for:"exampleFormControlInput1etb",class:"form-label"},"ETB",-1),Ft=["min"],Vt={class:"mb-3"},Dt=t("label",{for:"exampleFormControlInput1etc",class:"form-label"},"ETC",-1),Nt=["min"],Ut={class:"col-md-6"},Mt={class:"card mb-4"},At=t("h5",{class:"card-header"},"Hold(*)",-1),Ht={class:"card-body"},qt={class:"mt-2 mb-3"},Lt=t("label",{for:"largeInput",class:"form-label"},"Nombre de Hold",-1),Ot=t("button",{type:"submit",class:"btn btn-primary"},"Envoyer",-1),zt={__name:"FormShip",setup(p){const l=A(),o=$(),f=$();l.getUsersAll();const c=b(null),n=b(!1),u=b(!1),e=I({name:"",eta:null,etb:null,etc:null,numberHold:0}),m=i=>{let s=new Date(i);s.setDate(s.getDate()+1),e.etb=s.toISOString().split("T")[0],e.etc=s.toISOString().split("T")[0]},C=async()=>{await f.registerForm(c.value,e),l.getErrors.length||(n.value=!0,o.getShips()),l.getErrors.length&&(u.value=!0),setTimeout(()=>{n.value=!1,u.value=!1,e.name="",e.numberHold=0,e.etc=null,e.eta=null,e.etb=null},2e3)};return(i,s)=>(r(),d("form",{onSubmit:q(C,["prevent"])},[t("div",nt,[t("div",it,[t("div",rt,[ct,t("div",dt,[t("div",ut,[mt,h(t("select",{class:"form-select",id:"exampleFormControlSelectclient","aria-label":"Default select example","onUpdate:modelValue":s[0]||(s[0]=a=>c.value=a)},[(r(!0),d(E,null,B(S(l).users,a=>(r(),d("option",{key:a.id,value:a.id},x(a.name),9,pt))),128))],512),[[H,c.value]])])])])]),n.value?(r(),d("div",_t,bt)):w("",!0),u.value?(r(),d("div",ft,gt)):w("",!0),yt,t("div",xt,[t("div",wt,[$t,t("div",Ct,[t("div",St,[Tt,h(t("input",{type:"texte",class:"form-control",id:"exampleFormControlInput1",placeholder:"titanic",required:"","onUpdate:modelValue":s[1]||(s[1]=a=>e.name=a)},null,512),[[v,e.name]])]),t("div",It,[Et,h(t("input",{type:"date",class:"form-control",id:"exampleFormControlInput1eta",placeholder:"name@example.com",onChange:s[2]||(s[2]=a=>m(a.target.value)),"onUpdate:modelValue":s[3]||(s[3]=a=>e.eta=a)},null,544),[[v,e.eta]])]),t("div",Bt,[kt,h(t("input",{type:"date",class:"form-control",id:"exampleFormControlInput1etb",placeholder:"name@example.com","onUpdate:modelValue":s[4]||(s[4]=a=>e.etb=a),min:e.etb},null,8,Ft),[[v,e.etb]])]),t("div",Vt,[Dt,h(t("input",{type:"date",class:"form-control",id:"exampleFormControlInput1etc",placeholder:"name@example.com","onUpdate:modelValue":s[5]||(s[5]=a=>e.etc=a),min:e.etc},null,8,Nt),[[v,e.etc]])])])])]),t("div",Ut,[t("div",Mt,[At,t("div",Ht,[t("div",qt,[Lt,h(t("input",{id:"largeInput",class:"form-control form-control-lg",type:"number",placeholder:"5",min:"0",max:"10",required:"","onUpdate:modelValue":s[6]||(s[6]=a=>e.numberHold=a)},null,512),[[v,e.numberHold]])])])])]),Ot])],32))}},g=p=>(Q("data-v-4a8fe8c5"),p=p(),G(),p),jt={class:"layout-wrapper layout-content-navbar"},Rt={class:"layout-container"},Qt={class:"layout-page"},Gt={class:"content-wrapper"},Jt={class:"container-xxl flex-grow-1 container-p-y"},Kt=g(()=>t("h4",{class:"fw-bold py-3 mb-4"},[t("span",{class:"text-muted fw-light"},"Formulaire /")],-1)),Pt={class:"card"},Wt={class:"input-group input-group-merge"},Xt=g(()=>t("span",{class:"input-group-text",id:"basic-addon-search31"},[t("i",{class:"bx bx-search"})],-1)),Yt=g(()=>t("h5",{class:"card-header"},"Liste des navires",-1)),Zt={class:"table-responsive text-nowrap"},te={class:"table"},ee=g(()=>t("thead",null,[t("tr",null,[t("th",null,"Navire"),t("th",null,"ETA"),t("th",null,"ETB"),t("th",null,"ETC"),t("th",null,"Actions")])],-1)),se={key:0,src:J,alt:""},ae={key:1,class:"table-border-bottom-0 containerimgship"},oe=g(()=>t("div",{class:"content-backdrop fade"},null,-1)),le=g(()=>t("div",{class:"layout-overlay layout-menu-toggle"},null,-1)),ne={__name:"DashboardView",setup(p){const l=$(),{ships:o}=z(l),{getShips:f}=l;f();const c=b(""),n=j(()=>{const u=c.value.toLowerCase();return l.ships.filter(e=>e.name.toLowerCase().includes(u))});return(u,e)=>(r(),d("div",jt,[t("div",Rt,[y(K),t("div",Qt,[y(P),t("div",Gt,[t("div",Jt,[Kt,y(zt)]),t("div",Pt,[t("div",Wt,[Xt,h(t("input",{"onUpdate:modelValue":e[0]||(e[0]=m=>c.value=m),type:"text",class:"form-control",placeholder:"Search..."},null,512),[[v,c.value]])]),Yt,t("div",Zt,[t("table",te,[ee,S(l).getLoading?(r(),d("img",se)):w("",!0),S(o).length?(r(),d("tbody",ae,[(r(!0),d(E,null,B(n.value,m=>(r(),R(lt,{key:m.id,ship:m},null,8,["ship"]))),128))])):w("",!0)])])]),y(W),oe])])]),le]))}},me=O(ne,[["__scopeId","data-v-4a8fe8c5"]]);export{me as default};
